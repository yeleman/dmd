{% extends "base.html" %}

{% block title %}Gestion des indicateurs{% endblock %}

{% block content %}
<p><a class="btn btn-default" href="{% url 'indicator_add' %}"><i class="fa fa-plus"></i> Ajouter un indicateur</a></p>
<div class="row">
    <div class="col-md-12">   	
    	<div class="panel panel-default">
    		<div class="panel-heading">Tous les indicateurs</div>
    		<div class="panel-body">

    		<table class="table table-striped table-bordered table-hover indicators-list clickable-rows">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Nom</th>
                    </tr>
                </thead>
                <tbody>
                	{% for indicator in indicators %}
                    <tr class="odd gradeX" data-slug="{{ indicator.slug }}">
                        <td>{{ indicator.number }}</td>
                        <td><a href="{% url 'indicator_edit' indicator.slug %}">{{ indicator.name }}</a></td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="3">Aucun indicateur enregistré. Problème ?</td></tr>
                    {% endfor %}
                </tbody>
                </table>

		    </div>
		</div>
    </div>
</div>
{% endblock %}


{% block onJQready %}
var url = "{% url 'indicator_edit' 'aaaa' %}";
$('table.indicators-list tbody tr').on('click', function (e) {
	var slug = $(this).data('slug');
	window.location = url.replace('aaaa', slug);
});
{% endblock %}
